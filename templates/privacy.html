<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Privacy & Data Handling | Classroom Economy App</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #02301b;
      font-family: 'Inter', sans-serif;
      padding: 2rem;
    }
    .container {
      background-color: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      max-width: 800px;
      margin: auto;
    }
    h2 {
      margin-bottom: 1.5rem;
    }
    h4 {
      margin-top: 1.5rem;
    }
    h5 {
      margin-top: 1rem;
    }
    ul {
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2 class="mb-4">Privacy & Data Handling Policy</h2>
    <h4>Data We Collect</h4>

    <h5>Personal Identifiers</h5>
    <ul>
      <li><strong>First Name &amp; Last Initial</strong>: For friendly identification in the user interface.</li>
      <li><strong>Class Block</strong>: To group students by class period and apply block-specific configurations.</li>
    </ul>

    <h5>Authentication &amp; Setup Data</h5>
    <ul>
      <li><strong>DOB Sum (hashed)</strong>: Month + Day + Year sum, hashed at upload; used for identity verification.</li>
      <li><strong>Username (hashed)</strong>: Derived from challenge word, DOB sum, and initials; one-way hashed and used as the student login handle.</li>
      <li><strong>PIN (hashed)</strong>: Four- to six-digit code for login, stored only as a secure hash.</li>
      <li><strong>Passphrase (hashed)</strong>: Secret phrase for multi-factor authentication and high-stakes actions, stored only as a secure hash.</li>
    </ul>

    <h5>Educational Activity Data</h5>
    <p class="mb-2 text-muted"><em>These records are not personal identifiers—they exist solely to power the in-class simulation and will never be used for external profiling.</em></p>
    <ul>
      <li><strong>Attendance Records</strong>: Tap-in/out timestamps and calculated active/inactive minutes; necessary to compute base pay and track participation.</li>
      <li><strong>Account Balances</strong>: Checking and savings balances, updated dynamically from transaction history.</li>
      <li><strong>Transaction History</strong>: Detailed records of bonuses, payroll, rent, property tax, insurance premiums, non-sufficient funds fees, and store purchases; required to maintain accurate account states and enforce rules.</li>
      <li><strong>Monthly Billing Settings</strong>: Configured recurring charges (rent, taxes, insurance) for each student; used to automate billing processes.</li>
    </ul>

    <h4>How We Use Data</h4>
    <ul>
      <li>Support the simulation of real-world banking, employment, and budgeting to teach financial literacy.</li>
      <li>Analyze usage patterns and generate reports to improve educational outcomes and app functionality.</li>
      <li>Communicate important updates and notifications to students and educators.</li>
    </ul>

    <h4>Data Minimization & Retention</h4>
    <p>We collect only the data necessary to support classroom activities and educational objectives. All PII is either hashed or stored minimalistically. Data is retained only for as long as required by educational standards and district policies, then securely deleted.</p>

    <h4>Security Measures</h4>
    <ul>
      <li><strong>Encryption at Rest</strong>: All sensitive data is encrypted at rest to protect it from unauthorized access.</li>
      <li><strong>State-of-the-Art Hashing</strong>: We use industry-leading algorithms to protect your credentials. Passwords and PINs are hashed using <strong>Argon2</strong>, a key derivation function that is highly resistant to brute-force and rainbow table attacks. Other sensitive identifiers are hashed using <strong>HMAC-SHA256</strong> with a per-record salt and a global pepper, ensuring that each hash is unique and secure.</li>
      <li><strong>Encrypted Transit</strong>: All data transmitted between your device and our servers is protected using HTTPS/TLS, preventing eavesdropping or tampering.</li>
      <li><strong>Secure Session Management</strong>: The application enforces idle timeouts and avoids persistent cookies to minimize the risk of unauthorized access from unattended devices.</li>
      <li><strong>Irreversible Hashes</strong>: All hashing is one-way, meaning that original values cannot be recovered from the stored hashes by anyone, including administrators.</li>
    </ul>

    <h4>Error Logging & Monitoring</h4>
    <p>To maintain system reliability and quickly resolve technical issues, our application automatically logs errors and technical failures. This logging helps us identify and fix problems to ensure a smooth experience for all users.</p>
    <h5>What We Log</h5>
    <ul>
      <li><strong>Error Type</strong>: The classification of the error (e.g., 404 Not Found, 500 Internal Server Error).</li>
      <li><strong>Timestamp</strong>: When the error occurred.</li>
      <li><strong>Request Details</strong>: The URL path and HTTP method that triggered the error.</li>
      <li><strong>Technical Context</strong>: IP address, user agent (browser information), stack trace, and the last 50 lines of application logs.</li>
    </ul>
    <h5>Access & Retention</h5>
    <ul>
      <li>Error logs are accessible only to system administrators for debugging and system improvement purposes.</li>
      <li>Error logs do not contain student PII such as names, balances, or transaction details—only technical diagnostic information.</li>
      <li>Logs are retained for a reasonable period to support troubleshooting and are periodically purged in accordance with data retention policies.</li>
    </ul>

    <h4>Student Rights & Access</h4>
    <p>Students have the right to view their own data. If any information is incorrect, please contact your teacher to have it corrected. Account access and credential resets must be handled by an administrator.</p>

    <h4>Data Breach Notification</h4>
    <p>In the event of a data breach, we will notify affected users and authorities within 72 hours and provide guidance on mitigation steps.</p>

    <h4>Compliance</h4>
    <p>This application adheres to FERPA, COPPA, and relevant data privacy policies.</p>

    <h4>Contact Information</h4>
    <p>For questions or concerns, contact:<br>
       Timothy Chang: <a href="mailto:timothy.cs.chang@gmail.com">timothy.cs.chang@gmail.com</a><br>

    </p>

    <a href="{{ url_for('student.login') }}" class="btn btn-secondary mt-4">← Back to Login</a>
  </div>
</body>
</html>

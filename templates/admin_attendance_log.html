{% extends "layout_admin.html" %}
{% set page_title = "Attendance Log" %}
{% block title %}Attendance Log{% endblock %}
{% block content %}



<p>Total logs: {{ logs|length }}</p>
<p>Total students: {{ students|length }}</p>

<div class="table-responsive">
  <table class="table table-bordered table-striped table-sm align-middle">
    <thead class="table-light">
      <tr>
        <th>Student</th>
        <th>Block</th>

        <th>Tap In</th>
        <th>Tap Out</th>
        <th>Duration</th>
        <th>Reason</th>
      </tr>
    </thead>
    <tbody>
      {% for log in logs %}
      <tr>
        <td>{{ students.get(log.student_id, {}).get('name', 'Unknown') }}</td>
        <td>{{ students.get(log.student_id, {}).get('block', '—') }}</td>
 
        <td>{{ log.tap_in_time.strftime("%Y-%m-%d %H:%M:%S") if log.tap_in_time else '—' }}</td>
        <td>{{ log.tap_out_time.strftime("%Y-%m-%d %H:%M:%S") if log.tap_out_time else '—' }}</td>
        <td>
          {% if log.duration_seconds %}
            {{ (log.duration_seconds // 60)|int }}m {{ (log.duration_seconds % 60)|int }}s
          {% else %}
            —
          {% endif %}
        </td>
        <td>{{ log.reason or '—' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}